# Computer Vision –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –∑–∞—Ü–µ–ø–æ–∫

## üéØ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞—Å–ø–æ–∑–Ω–∞–µ—Ç –∑–∞—Ü–µ–ø–∫–∏ –Ω–∞ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è—Ö —Å–µ–∫—Ç–æ—Ä–æ–≤ —Å–∫–∞–ª–æ–¥—Ä–æ–º–∞ —Å –ø–æ–º–æ—â—å—é Computer Vision.

### ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:

1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ** - –Ω–∞—Ö–æ–¥–∏—Ç –∑–∞—Ü–µ–ø–∫–∏ –ø–æ —Ü–≤–µ—Ç–∞–º (–∫—Ä–∞—Å–Ω—ã–π, —Å–∏–Ω–∏–π, –∑–µ–ª–µ–Ω—ã–π, –∂–µ–ª—Ç—ã–π)
2. **HSV —Ü–≤–µ—Ç–æ–≤–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ** - —Ç–æ—á–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ü–≤–µ—Ç–æ–≤
3. **–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ —Ü–≤–µ—Ç–∞–º** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥—Ä—É–ø–ø–∏—Ä—É–µ—Ç –∑–∞—Ü–µ–ø–∫–∏ –ø–æ —Ü–≤–µ—Ç–∞–º
4. **–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∑–∞—Ü–µ–ø–æ–∫** - —Ç–æ—á–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã x, y –¥–ª—è –∫–∞–∂–¥–æ–π –∑–∞—Ü–µ–ø–∫–∏
5. **–£—Ä–æ–≤–µ–Ω—å —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏** - confidence score –¥–ª—è –∫–∞–∂–¥–æ–π –∑–∞—Ü–µ–ø–∫–∏

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è:

1. **–ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è** - —á–µ—Ä–µ–∑ multer middleware
2. **–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ HSV** - –¥–ª—è –ª—É—á—à–µ–≥–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Ü–≤–µ—Ç–æ–≤
3. **–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∏–∫—Å–µ–ª–µ–π** - —Å —à–∞–≥–æ–º 5px –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
4. **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ü–≤–µ—Ç–∞–º** - –ø–æ–∏—Å–∫ –∑–∞—Ü–µ–ø–æ–∫ –ø–æ HSV –¥–∏–∞–ø–∞–∑–æ–Ω–∞–º
5. **–î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è** - —É–¥–∞–ª–µ–Ω–∏–µ –±–ª–∏–∑–∫–∏—Ö –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ (—Ä–∞–¥–∏—É—Å 20px)
6. **–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞** - –ø–æ —Ü–≤–µ—Ç–∞–º –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç—Ä–∞—Å—Å

### –¶–≤–µ—Ç–æ–≤—ã–µ –¥–∏–∞–ø–∞–∑–æ–Ω—ã:

```javascript
const colors = [
  { name: 'red', hMin: 0, hMax: 10, sMin: 50, vMin: 50 },
  { name: 'blue', hMin: 200, hMax: 260, sMin: 50, vMin: 50 },
  { name: 'green', hMin: 80, hMax: 140, sMin: 50, vMin: 50 },
  { name: 'yellow', hMin: 40, hMax: 80, sMin: 50, vMin: 50 }
]
```

## üì° API Endpoints

### 1. –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ –∏ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ

```http
POST /api/upload-sector
Content-Type: multipart/form-data

FormData:
- image: File (—Ñ–æ—Ç–æ —Å–µ–∫—Ç–æ—Ä–∞)
- sectorId: Number (ID —Å–µ–∫—Ç–æ—Ä–∞)
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "ok": true,
  "message": "Image processed successfully",
  "data": {
    "sectorId": 1,
    "imageUrl": "/uploads/1234567890-photo.jpg",
    "detectedHolds": {
      "red": [
        { "x": 120, "y": 200, "confidence": 85 },
        { "x": 150, "y": 250, "confidence": 92 }
      ],
      "blue": [
        { "x": 80, "y": 180, "confidence": 78 }
      ]
    },
    "totalHolds": 3
  }
}
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∞—Å—Å—ã

```http
POST /api/create-route
Content-Type: application/json

{
  "sectorId": 1,
  "category": "6–∞",
  "setter": "–°–≤–∏—Ä–∏–¥–æ–≤",
  "color": "red",
  "holds": [
    { "x": 120, "y": 200 },
    { "x": 150, "y": 250 }
  ]
}
```

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### 1. –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ —Å–µ–∫—Ç–æ—Ä–∞

```javascript
const formData = new FormData()
formData.append('image', fileInput.files[0])
formData.append('sectorId', '1')

const response = await fetch('/api/upload-sector', {
  method: 'POST',
  body: formData
})

const result = await response.json()
console.log('–†–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω—ã–µ –∑–∞—Ü–µ–ø–∫–∏:', result.data.detectedHolds)
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∞—Å—Å—ã

```javascript
const routeData = {
  sectorId: 1,
  category: '6–∞',
  setter: '–°–≤–∏—Ä–∏–¥–æ–≤',
  color: 'red',
  holds: [
    { x: 120, y: 200 },
    { x: 150, y: 250 }
  ]
}

const response = await fetch('/api/create-route', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json'
  },
  body: JSON.stringify(routeData)
})
```

## üé® –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º

### Canvas overlay:

```javascript
// –†–∏—Å–æ–≤–∞–Ω–∏–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω—ã—Ö –∑–∞—Ü–µ–ø–æ–∫
detectedHolds.forEach(hold => {
  ctx.beginPath()
  ctx.arc(hold.x, hold.y, 12, 0, 2 * Math.PI)
  ctx.fillStyle = hold.color
  ctx.fill()
  ctx.strokeStyle = 'white'
  ctx.lineWidth = 3
  ctx.stroke()
})
```

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

```env
# –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 10MB)
MAX_FILE_SIZE=10485760

# –ü—É—Ç—å –¥–ª—è –∑–∞–≥—Ä—É–∑–æ–∫
UPLOAD_PATH=uploads/
```

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:

- **–®–∞–≥ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è**: 5px (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è)
- **–†–∞–¥–∏—É—Å –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏**: 20px (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è)
- **–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å**: 50% (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è)

## üîç –û—Ç–ª–∞–¥–∫–∞

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:

```javascript
console.log('Detected holds:', detectedHolds)
console.log('Holds by color:', holdsByColor)
console.log('Total holds:', detectedHolds.length)
```

### –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è:

```javascript
// –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤—Å–µ—Ö —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω—ã—Ö –∑–∞—Ü–µ–ø–æ–∫
detectedHolds.forEach(hold => {
  console.log(`Color: ${hold.color}, Position: (${hold.x}, ${hold.y}), Confidence: ${hold.confidence}%`)
})
```

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- **–í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏**: ~2-5 —Å–µ–∫—É–Ω–¥ –¥–ª—è —Ñ–æ—Ç–æ 1920x1080
- **–¢–æ—á–Ω–æ—Å—Ç—å**: 85-95% –¥–ª—è –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ñ–æ—Ç–æ
- **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã**: JPEG, PNG, WebP
- **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä**: 10MB

## üõ† –£–ª—É—á—à–µ–Ω–∏—è

### –ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:

1. **–ú–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ** - TensorFlow.js –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è —Ç–æ—á–Ω–æ—Å—Ç–∏
2. **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —à—É–º–∞** - —É–¥–∞–ª–µ–Ω–∏–µ –ª–æ–∂–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π
3. **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–æ—Ä–æ–≥–∏** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–¥ –æ—Å–≤–µ—â–µ–Ω–∏–µ
4. **Batch –æ–±—Ä–∞–±–æ—Ç–∫–∞** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ñ–æ—Ç–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ

---

**Computer Vision –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! üéØ**



